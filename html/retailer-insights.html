<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insights - ChainSync AI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation will be injected here -->
    <div id="navigationContainer"></div>

    <div class="container with-nav">
        <div class="scroll-content with-bottom-nav">
            <!-- Header -->
            <div style="position: relative; padding: 20px 20px 0 20px; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                    <button class="back-button" onclick="window.location.href='retailer-dashboard.html'" style="background: #1a1f3a; border: 1px solid #2a2f45; border-radius: 10px; padding: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <svg style="width: 20px; height: 20px; stroke: #00d4ff;" viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"/>
                            <polyline points="12 19 5 12 12 5"/>
                        </svg>
                    </button>
                    <h2 style="color: #fff; font-size: 18px; font-weight: 700; margin: 0; flex: 1; text-align: center;">üìà AI Insights</h2>
                    <button onclick="alert('Export reports feature coming soon!')" style="background: #1a1f3a; border: 1px solid #2a2f45; border-radius: 10px; padding: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <svg style="width: 20px; height: 20px; stroke: #00d4ff;" viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- AI Summary Cards -->
            <div style="margin: 0 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                <div style="background: linear-gradient(135deg, #00d4ff 0%, #0066cc 100%); padding: 15px; border-radius: 12px;">
                    <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px; margin-bottom: 5px;">Weekly Sales</div>
                    <div style="color: #fff; font-size: 22px; font-weight: 700;">‡ß≥12,430</div>
                    <div style="color: rgba(255, 255, 255, 0.9); font-size: 11px; margin-top: 5px; display: flex; align-items: center; gap: 3px;">
                        <span>‚Üë 18%</span>
                        <span style="opacity: 0.7;">vs last week</span>
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%); padding: 15px; border-radius: 12px;">
                    <div style="color: rgba(0, 0, 0, 0.7); font-size: 12px; margin-bottom: 5px;">Profit Margin</div>
                    <div style="color: #000; font-size: 22px; font-weight: 700;">28.5%</div>
                    <div style="color: rgba(0, 0, 0, 0.7); font-size: 11px; margin-top: 5px; display: flex; align-items: center; gap: 3px;">
                        <span>‚Üë 3.2%</span>
                        <span style="opacity: 0.7;">improvement</span>
                    </div>
                </div>
            </div>

            <!-- AI Recommendations -->
            <div style="margin: 0 20px 25px 20px;">
                <div class="ai-banner" style="background: linear-gradient(135deg, #ffa500 0%, #ff8800 100%); padding: 15px; border-radius: 12px; color: #000;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <svg style="width: 24px; height: 24px;" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                        <strong style="font-size: 15px;">ü§ñ Smart Recommendation</strong>
                    </div>
                    <p style="font-size: 13px; opacity: 0.9; margin: 0;">Stock up Product SKU-4429 - AI predicts 40% demand surge this weekend!</p>
                </div>
            </div>

            <!-- Sales Trend Chart -->
            <div style="margin: 0 20px 20px 20px;">
                <div style="background: #1a1f3a; border-radius: 12px; padding: 15px; border: 1px solid #2a2f45;">
                    <h3 style="color: #fff; font-size: 15px; margin-bottom: 15px;">üìä Sales Trend (Last 7 Days)</h3>
                    <div id="salesChart" style="position: relative; height: 200px;"></div>
                </div>
            </div>

            <!-- Top Products -->
            <div style="margin: 0 20px 20px 20px;">
                <div style="background: #1a1f3a; border-radius: 12px; padding: 15px; border: 1px solid #2a2f45;">
                    <h3 style="color: #fff; font-size: 15px; margin-bottom: 15px;">üèÜ Top Selling Products</h3>
                    <div id="topProducts"></div>
                </div>
            </div>

            <!-- AI Restock Alerts -->
            <div style="margin: 0 20px 20px 20px;">
                <div style="background: #1a1f3a; border-radius: 12px; padding: 15px; border: 1px solid #2a2f45;">
                    <h3 style="color: #fff; font-size: 15px; margin-bottom: 15px;">‚ö° AI Restock Alerts</h3>
                    <div id="restockAlerts"></div>
                </div>
            </div>

            <!-- AI Insights -->
            <div style="margin: 0 20px 20px 20px;">
                <div style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 153, 204, 0.1) 100%); border: 1px solid #00d4ff; border-radius: 12px; padding: 15px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <svg style="width: 24px; height: 24px;" viewBox="0 0 24 24" fill="none" stroke="#00d4ff" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4"/>
                            <path d="M12 8h.01"/>
                        </svg>
                        <h3 style="color: #00d4ff; font-size: 15px; margin: 0;">üí° AI Business Insights</h3>
                    </div>
                    <div id="aiInsights"></div>
                </div>
            </div>

            <!-- Sales by Category -->
            <div style="margin: 0 20px 20px 20px;">
                <div style="background: #1a1f3a; border-radius: 12px; padding: 15px; border: 1px solid #2a2f45;">
                    <h3 style="color: #fff; font-size: 15px; margin-bottom: 15px;">üì¶ Sales by Category</h3>
                    <div id="categoryBreakdown"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="navigationPlaceholder"></div>

    <script src="navigation.js"></script>
    <script src="ai-data.js"></script>
    <script>
        // Sample data
        const salesData = {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            values: [1200, 1450, 1380, 1620, 1890, 2340, 2100],
            forecast: [null, null, null, null, null, null, 2200]
        };

        const topProducts = [
            { name: 'Product SKU-4429', sales: 245, revenue: 208250, trend: '+24%', color: '#00ff88' },
            { name: 'Coca Cola 250ml', sales: 420, revenue: 14700, trend: '+18%', color: '#00d4ff' },
            { name: 'Dettol Soap 100g', sales: 380, revenue: 17100, trend: '+15%', color: '#ffa500' },
            { name: 'Lays Chips 50g', sales: 350, revenue: 8750, trend: '+12%', color: '#4169e1' },
            { name: 'Sunsilk Shampoo 200ml', sales: 156, revenue: 23400, trend: '+8%', color: '#8b92b0' }
        ];

        const restockAlerts = aiData.retailer.restockAlerts;

        const aiInsights = [
            {
                icon: 'üìà',
                title: 'Weekend Sales Pattern',
                message: 'Saturday shows 40% higher sales. Stock beverages and snacks for weekend rush.',
                confidence: 92
            },
            {
                icon: 'üéØ',
                title: 'Bundle Opportunity',
                message: 'Customers buying chips also buy beverages 78% of the time. Create combo offers.',
                confidence: 88
            },
            {
                icon: 'üí∞',
                title: 'Profit Optimization',
                message: 'Focus on SKU-4429 - highest profit margin at 35%. Increase shelf visibility.',
                confidence: 95
            },
            {
                icon: 'üìÖ',
                title: 'Seasonal Trend',
                message: 'November typically sees 25% increase in cosmetics. Prepare beauty products stock.',
                confidence: 86
            }
        ];

        const categoryData = [
            { name: 'Electronics', revenue: 45200, percentage: 35, color: '#00d4ff' },
            { name: 'Food & Beverage', revenue: 38500, percentage: 30, color: '#00ff88' },
            { name: 'Cosmetics', revenue: 25800, percentage: 20, color: '#ffa500' },
            { name: 'Hardware', revenue: 19500, percentage: 15, color: '#4169e1' }
        ];

        // Render Sales Chart
        function renderSalesChart() {
            const container = document.getElementById('salesChart');
            const maxValue = Math.max(...salesData.values);
            const chartHeight = 200;

            const bars = salesData.values.map((value, index) => {
                const barHeight = (value / maxValue) * (chartHeight - 50);
                const isForecast = salesData.forecast[index] !== null;
                
                return `
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <div style="font-size: 11px; color: #00d4ff; font-weight: 600;">‡ß≥${(value/1000).toFixed(1)}k</div>
                        <div style="width: 100%; display: flex; justify-content: center; align-items: flex-end; height: ${chartHeight - 50}px;">
                            <div style="width: 70%; background: ${isForecast ? 'rgba(0, 212, 255, 0.3)' : 'linear-gradient(180deg, #00d4ff 0%, #0066cc 100%)'}; height: ${barHeight}px; border-radius: 8px 8px 0 0; border: ${isForecast ? '2px dashed #00d4ff' : 'none'};"></div>
                        </div>
                        <div style="font-size: 11px; color: #8b92b0; font-weight: 600;">${salesData.labels[index]}</div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <div style="display: flex; gap: 8px; height: 100%;">
                    ${bars}
                </div>
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 12px; height: 12px; background: linear-gradient(135deg, #00d4ff 0%, #0066cc 100%); border-radius: 3px;"></div>
                        <span style="color: #8b92b0; font-size: 11px;">Actual</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <div style="width: 12px; height: 12px; background: rgba(0, 212, 255, 0.3); border: 2px dashed #00d4ff; border-radius: 3px;"></div>
                        <span style="color: #8b92b0; font-size: 11px;">AI Forecast</span>
                    </div>
                </div>
            `;
        }

        // Render Top Products
        function renderTopProducts() {
            const container = document.getElementById('topProducts');
            container.innerHTML = topProducts.map((product, index) => `
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                            <div style="background: ${product.color}; color: ${product.color === '#8b92b0' ? '#fff' : '#000'}; width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; flex-shrink: 0;">
                                ${index + 1}
                            </div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="color: #fff; font-size: 13px; font-weight: 600; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                    ${product.name}
                                </div>
                                <div style="color: #8b92b0; font-size: 11px;">${product.sales} units sold</div>
                            </div>
                        </div>
                        <div style="text-align: right; flex-shrink: 0; margin-left: 10px;">
                            <div style="color: #00d4ff; font-weight: 700; font-size: 14px;">‡ß≥${(product.revenue/1000).toFixed(1)}k</div>
                            <div style="color: #00ff88; font-size: 11px; font-weight: 600;">${product.trend}</div>
                        </div>
                    </div>
                    <div style="background: #0a0e27; height: 6px; border-radius: 10px; overflow: hidden;">
                        <div style="background: ${product.color}; height: 100%; width: ${(product.revenue / topProducts[0].revenue) * 100}%; transition: width 0.3s ease;"></div>
                    </div>
                </div>
            `).join('');
        }

        // Render Restock Alerts
        function renderRestockAlerts() {
            const container = document.getElementById('restockAlerts');
            container.innerHTML = restockAlerts.map(alert => {
                const urgencyColor = alert.urgency === 'high' ? '#ff4444' : alert.urgency === 'medium' ? '#ffa500' : '#4169e1';
                const urgencyText = alert.urgency === 'high' ? 'Urgent' : alert.urgency === 'medium' ? 'Medium' : 'Low';
                
                return `
                    <div style="background: rgba(${alert.urgency === 'high' ? '255, 68, 68' : '255, 165, 0'}, 0.1); border-left: 3px solid ${urgencyColor}; padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                            <div style="flex: 1;">
                                <div style="color: #fff; font-weight: 600; font-size: 14px; margin-bottom: 5px;">
                                    ${alert.product}
                                </div>
                                <div style="color: #8b92b0; font-size: 12px; margin-bottom: 5px;">
                                    Current Stock: <span style="color: ${urgencyColor}; font-weight: 600;">${alert.currentStock} units</span>
                                </div>
                                <div style="color: #8b92b0; font-size: 12px;">
                                    Will run out in: <span style="color: ${urgencyColor}; font-weight: 600;">${alert.daysLeft} days</span>
                                </div>
                            </div>
                            <div style="background: ${urgencyColor}; color: ${alert.urgency === 'high' ? '#fff' : '#000'}; padding: 4px 10px; border-radius: 15px; font-size: 10px; font-weight: 600; white-space: nowrap;">
                                ${urgencyText}
                            </div>
                        </div>
                        
                        <div style="background: rgba(0, 212, 255, 0.1); border-left: 2px solid #00d4ff; padding: 10px; border-radius: 6px; margin-bottom: 10px;">
                            <div style="color: #00d4ff; font-size: 11px; font-weight: 600; margin-bottom: 4px;">
                                ü§ñ AI Prediction (${alert.aiPrediction.confidence}% confident)
                            </div>
                            <div style="color: #fff; font-size: 11px; margin-bottom: 3px;">
                                ${alert.aiPrediction.message}
                            </div>
                            <div style="color: #8b92b0; font-size: 11px;">
                                Trend: <span style="color: ${alert.aiPrediction.demandTrend === 'increasing' ? '#00ff88' : '#ffa500'}; font-weight: 600; text-transform: capitalize;">${alert.aiPrediction.demandTrend}</span>
                            </div>
                        </div>

                        <div style="display: flex; gap: 8px;">
                            <button class="secondary-button" onclick="alert('Viewing supplier: ${alert.aiPrediction.suggestedSupplier}')" style="flex: 1; padding: 8px 12px; font-size: 12px;">
                                View Supplier
                            </button>
                            <button class="primary-button" onclick="quickReorder('${alert.product}', ${alert.recommendedRestock})" style="flex: 1; padding: 8px 12px; font-size: 12px;">
                                <span class="primary-button-text">Reorder ${alert.recommendedRestock}</span>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Render AI Insights
        function renderAIInsights() {
            const container = document.getElementById('aiInsights');
            container.innerHTML = aiInsights.map(insight => `
                <div style="background: rgba(0, 212, 255, 0.05); padding: 12px; border-radius: 10px; margin-bottom: 12px;">
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <div style="font-size: 28px; flex-shrink: 0;">${insight.icon}</div>
                        <div style="flex: 1;">
                            <div style="color: #fff; font-weight: 600; font-size: 13px; margin-bottom: 5px;">
                                ${insight.title}
                            </div>
                            <div style="color: #8b92b0; font-size: 12px; line-height: 1.5; margin-bottom: 6px;">
                                ${insight.message}
                            </div>
                            <div style="display: inline-block; background: rgba(0, 212, 255, 0.2); padding: 4px 10px; border-radius: 12px;">
                                <span style="color: #00d4ff; font-size: 10px; font-weight: 600;">
                                    ${insight.confidence}% Confidence
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Render Category Breakdown
        function renderCategoryBreakdown() {
            const container = document.getElementById('categoryBreakdown');
            const totalRevenue = categoryData.reduce((sum, cat) => sum + cat.revenue, 0);

            container.innerHTML = categoryData.map(category => `
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #fff; font-size: 13px; font-weight: 600;">
                            ${category.name}
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: #8b92b0; font-size: 12px;">${category.percentage}%</span>
                            <span style="color: #00d4ff; font-weight: 700; font-size: 14px;">‡ß≥${(category.revenue/1000).toFixed(1)}k</span>
                        </div>
                    </div>
                    <div style="background: #0a0e27; height: 8px; border-radius: 10px; overflow: hidden;">
                        <div style="background: ${category.color}; height: 100%; width: ${category.percentage}%; transition: width 0.5s ease;"></div>
                    </div>
                </div>
            `).join('');
        }

        function quickReorder(product, quantity) {
            if (confirm(`Quick reorder ${quantity} units of ${product}?\n\nThis will create a purchase order.`)) {
                alert(`Order created! ${quantity} units of ${product} added to cart.`);
                window.location.href = 'retailer-purchase-products.html';
            }
        }

        // Initialize all components
        renderSalesChart();
        renderTopProducts();
        renderRestockAlerts();
        renderAIInsights();
        renderCategoryBreakdown();
    </script>

    <style>
        .icon-button {
            background: #1a1f3a;
            border: 1px solid #2a2f45;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
        }
        .icon-button svg {
            width: 20px;
            height: 20px;
            stroke: #00d4ff;
        }
    </style>

    <script src="navigation.js"></script>
    <script>
        // Inject navigation
        document.getElementById('navigationContainer').innerHTML = generateMobileNav('retailer');
    </script>
</body>
</html>
    </style>
</body>
</html>