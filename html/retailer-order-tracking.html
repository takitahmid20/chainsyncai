<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Tracking - ChainSync AI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation will be injected here -->
    <div id="navigationContainer"></div>

    <div class="container with-nav">
        <div class="scroll-content with-bottom-nav">
            <!-- Header -->
            <div style="position: relative; padding: 20px 20px 0 20px; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                    <button class="back-button" onclick="window.location.href='retailer-dashboard.html'" style="background: #1a1f3a; border: 1px solid #2a2f45; border-radius: 10px; padding: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <svg style="width: 20px; height: 20px; stroke: #00d4ff;" viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"/>
                            <polyline points="12 19 5 12 12 5"/>
                        </svg>
                    </button>
                    <h2 style="color: #fff; font-size: 18px; font-weight: 700; margin: 0; flex: 1; text-align: center;">üì¶ Order Tracking</h2>
                    <div style="width: 40px;"></div>
                </div>
            </div>

            <!-- AI ETA Banner -->
            <div style="margin: 0 20px 20px 20px;">
                <div class="ai-banner" style="background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%); padding: 15px; border-radius: 12px; color: #000;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <svg style="width: 24px; height: 24px;" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <strong style="font-size: 15px;">ü§ñ AI Delivery Prediction</strong>
                    </div>
                    <p style="font-size: 13px; opacity: 0.9; margin: 0;">Your order #RTL-2847 will arrive in 2 hours 15 minutes (95% confidence)</p>
                </div>
            </div>

            <!-- Active Orders -->
            <div style="margin: 0 20px 25px 20px;">
                <h3 style="color: #fff; font-size: 16px; margin-bottom: 15px;">üöö Active Deliveries</h3>
                <div id="activeOrders"></div>
            </div>

            <!-- Order History -->
            <div style="margin: 0 20px 20px 20px;">
                <h3 style="color: #fff; font-size: 16px; margin-bottom: 15px;">üìã Order History</h3>
                <div id="orderHistory"></div>
            </div>

            <!-- Order Detail Modal -->
            <div class="modal" id="orderDetailModal">
                <div class="modal-content" style="max-height: 85vh; overflow-y: auto;">
                    <div class="modal-header">
                        <h3 id="modalOrderId">Order Details</h3>
                        <button class="close-button" onclick="closeOrderModal()">√ó</button>
                    </div>
                    <div class="modal-body" id="modalOrderDetails"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="navigationPlaceholder"></div>

    <script src="navigation.js"></script>
    <script src="ai-data.js"></script>
    <script>
        const orders = [
            {
                id: 'RTL-2847',
                status: 'in-transit',
                progress: 75,
                items: [
                    { name: 'Product SKU-4429', qty: 50, price: 850 },
                    { name: 'Dettol Soap 100g', qty: 100, price: 45 }
                ],
                total: 47000,
                supplier: 'QuickSupply Co',
                orderDate: '2025-10-30',
                expectedDelivery: '2025-11-01',
                currentLocation: 'Mirpur Depot',
                driver: 'Karim Ahmed',
                vehicle: 'VAN-2031',
                aiPrediction: {
                    eta: '2h 15min',
                    confidence: 95,
                    onTime: true,
                    message: 'Delivery on schedule, no delays expected'
                },
                timeline: [
                    { stage: 'Order Placed', time: '10:30 AM, Oct 30', completed: true },
                    { stage: 'Order Confirmed', time: '11:15 AM, Oct 30', completed: true },
                    { stage: 'Dispatched', time: '08:00 AM, Nov 01', completed: true },
                    { stage: 'In Transit', time: 'Now', completed: true },
                    { stage: 'Delivered', time: 'Expected 2h 15min', completed: false }
                ]
            },
            {
                id: 'RTL-2846',
                status: 'dispatched',
                progress: 45,
                items: [
                    { name: 'Coca Cola 250ml', qty: 200, price: 35 },
                    { name: 'Lays Chips 50g', qty: 150, price: 25 }
                ],
                total: 10750,
                supplier: 'BeverageWorld',
                orderDate: '2025-10-29',
                expectedDelivery: '2025-11-02',
                currentLocation: 'Warehouse Processing',
                driver: 'Rahim Mia',
                vehicle: 'TRK-4522',
                aiPrediction: {
                    eta: '1 day 6h',
                    confidence: 89,
                    onTime: true,
                    message: 'Expected to arrive on time'
                },
                timeline: [
                    { stage: 'Order Placed', time: '02:45 PM, Oct 29', completed: true },
                    { stage: 'Order Confirmed', time: '03:20 PM, Oct 29', completed: true },
                    { stage: 'Dispatched', time: '09:30 AM, Nov 01', completed: true },
                    { stage: 'In Transit', time: 'Expected 6h', completed: false },
                    { stage: 'Delivered', time: 'Expected Nov 02', completed: false }
                ]
            },
            {
                id: 'RTL-2845',
                status: 'delivered',
                progress: 100,
                items: [
                    { name: 'LED Bulb 15W', qty: 40, price: 180 },
                    { name: 'Screwdriver Set', qty: 20, price: 450 }
                ],
                total: 16200,
                supplier: 'LightTech Co',
                orderDate: '2025-10-25',
                expectedDelivery: '2025-10-29',
                deliveredDate: '2025-10-28',
                currentLocation: 'Delivered',
                driver: 'Jalal Uddin',
                vehicle: 'VAN-2029',
                aiPrediction: {
                    eta: 'Delivered',
                    confidence: 100,
                    onTime: true,
                    message: 'Delivered 1 day early!'
                },
                timeline: [
                    { stage: 'Order Placed', time: '11:00 AM, Oct 25', completed: true },
                    { stage: 'Order Confirmed', time: '11:45 AM, Oct 25', completed: true },
                    { stage: 'Dispatched', time: '07:00 AM, Oct 28', completed: true },
                    { stage: 'In Transit', time: '08:30 AM, Oct 28', completed: true },
                    { stage: 'Delivered', time: '02:15 PM, Oct 28', completed: true }
                ]
            },
            {
                id: 'RTL-2844',
                status: 'delivered',
                progress: 100,
                items: [
                    { name: 'Sunsilk Shampoo 200ml', qty: 60, price: 150 }
                ],
                total: 9000,
                supplier: 'BeautyHub',
                orderDate: '2025-10-22',
                expectedDelivery: '2025-10-24',
                deliveredDate: '2025-10-24',
                currentLocation: 'Delivered',
                driver: 'Habib Rahman',
                vehicle: 'VAN-2027',
                aiPrediction: {
                    eta: 'Delivered',
                    confidence: 100,
                    onTime: true,
                    message: 'Delivered on time'
                },
                timeline: [
                    { stage: 'Order Placed', time: '03:30 PM, Oct 22', completed: true },
                    { stage: 'Order Confirmed', time: '04:00 PM, Oct 22', completed: true },
                    { stage: 'Dispatched', time: '08:00 AM, Oct 24', completed: true },
                    { stage: 'In Transit', time: '09:15 AM, Oct 24', completed: true },
                    { stage: 'Delivered', time: '01:45 PM, Oct 24', completed: true }
                ]
            }
        ];

        function getStatusColor(status) {
            const colors = {
                'placed': '#8b92b0',
                'confirmed': '#4169e1',
                'dispatched': '#ffa500',
                'in-transit': '#00d4ff',
                'delivered': '#00ff88'
            };
            return colors[status] || '#8b92b0';
        }

        function getStatusText(status) {
            const texts = {
                'placed': 'Order Placed',
                'confirmed': 'Confirmed',
                'dispatched': 'Dispatched',
                'in-transit': 'In Transit',
                'delivered': 'Delivered'
            };
            return texts[status] || status;
        }

        function renderActiveOrders() {
            const active = orders.filter(o => o.status !== 'delivered');
            const container = document.getElementById('activeOrders');

            if (active.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px; background: #1a1f3a; border-radius: 12px;">
                        <div style="font-size: 50px; margin-bottom: 10px;">üì¶</div>
                        <p style="color: #8b92b0; font-size: 14px;">No active deliveries</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = active.map(order => `
                <div class="order-card" style="background: #1a1f3a; border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid #2a2f45; cursor: pointer;" onclick="viewOrder('${order.id}')">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div>
                            <div style="color: #00d4ff; font-weight: 700; font-size: 15px; margin-bottom: 5px;">${order.id}</div>
                            <div style="color: #8b92b0; font-size: 12px;">${order.supplier}</div>
                        </div>
                        <div style="background: ${getStatusColor(order.status)}; color: ${order.status === 'delivered' ? '#000' : '#fff'}; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600;">
                            ${getStatusText(order.status)}
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div style="margin-bottom: 12px;">
                        <div style="background: #0a0e27; height: 8px; border-radius: 10px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, #00d4ff 0%, #00ff88 100%); height: 100%; width: ${order.progress}%; transition: width 0.3s ease;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span style="color: #8b92b0; font-size: 11px;">Progress: ${order.progress}%</span>
                            <span style="color: #00ff88; font-size: 11px; font-weight: 600;">${order.aiPrediction.eta}</span>
                        </div>
                    </div>

                    <!-- AI Prediction -->
                    <div style="background: rgba(0, 212, 255, 0.1); border-left: 3px solid #00d4ff; padding: 10px; border-radius: 8px; margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <svg style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="none" stroke="#00d4ff" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <span style="color: #00d4ff; font-size: 12px; font-weight: 600;">AI Prediction</span>
                            <span style="color: #8b92b0; font-size: 11px;">${order.aiPrediction.confidence}% confident</span>
                        </div>
                        <p style="color: #fff; font-size: 12px; margin: 0;">${order.aiPrediction.message}</p>
                    </div>

                    <!-- Location -->
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                        <svg style="width: 16px; height: 16px;" viewBox="0 0 24 24" fill="none" stroke="#ffa500" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        <span style="color: #8b92b0; font-size: 12px;">Current Location:</span>
                        <span style="color: #fff; font-size: 12px; font-weight: 600;">${order.currentLocation}</span>
                    </div>

                    <!-- Items Summary -->
                    <div style="color: #8b92b0; font-size: 12px; margin-bottom: 8px;">
                        ${order.items.length} item(s) ‚Ä¢ Total: ‡ß≥${order.total.toLocaleString()}
                    </div>

                    <div style="color: #00d4ff; font-size: 12px; font-weight: 600; text-align: center;">
                        Tap to view full details ‚Üí
                    </div>
                </div>
            `).join('');
        }

        function renderOrderHistory() {
            const history = orders.filter(o => o.status === 'delivered');
            const container = document.getElementById('orderHistory');

            container.innerHTML = history.map(order => `
                <div class="order-card" style="background: #1a1f3a; border-radius: 12px; padding: 15px; margin-bottom: 12px; border: 1px solid #2a2f45; cursor: pointer;" onclick="viewOrder('${order.id}')">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div>
                            <div style="color: #00d4ff; font-weight: 700; font-size: 14px; margin-bottom: 3px;">${order.id}</div>
                            <div style="color: #8b92b0; font-size: 11px;">${order.supplier}</div>
                        </div>
                        <div style="background: #00ff88; color: #000; padding: 5px 10px; border-radius: 15px; font-size: 10px; font-weight: 600;">
                            ‚úì Delivered
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="color: #8b92b0; font-size: 11px; margin-bottom: 3px;">Delivered on</div>
                            <div style="color: #fff; font-size: 12px; font-weight: 600;">${order.deliveredDate}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #8b92b0; font-size: 11px; margin-bottom: 3px;">Total</div>
                            <div style="color: #00ff88; font-size: 14px; font-weight: 700;">‡ß≥${order.total.toLocaleString()}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function viewOrder(id) {
            const order = orders.find(o => o.id === id);
            document.getElementById('modalOrderId').textContent = `Order ${order.id}`;
            
            document.getElementById('modalOrderDetails').innerHTML = `
                <!-- Status Badge -->
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="display: inline-block; background: ${getStatusColor(order.status)}; color: ${order.status === 'delivered' ? '#000' : '#fff'}; padding: 8px 20px; border-radius: 25px; font-size: 13px; font-weight: 600; margin-bottom: 10px;">
                        ${getStatusText(order.status)}
                    </div>
                    <div style="color: #8b92b0; font-size: 12px;">Order placed on ${order.orderDate}</div>
                </div>

                <!-- Timeline -->
                <div style="background: #0a0e27; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <h4 style="color: #fff; font-size: 14px; margin-bottom: 15px;">üìç Delivery Timeline</h4>
                    ${order.timeline.map((stage, index) => `
                        <div style="display: flex; gap: 15px; margin-bottom: ${index === order.timeline.length - 1 ? '0' : '15px'};">
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div style="width: 24px; height: 24px; border-radius: 50%; background: ${stage.completed ? '#00ff88' : '#2a2f45'}; border: 2px solid ${stage.completed ? '#00ff88' : '#2a2f45'}; display: flex; align-items: center; justify-content: center;">
                                    ${stage.completed ? '<span style="color: #000; font-size: 14px; font-weight: 700;">‚úì</span>' : ''}
                                </div>
                                ${index < order.timeline.length - 1 ? `<div style="width: 2px; height: 40px; background: ${stage.completed ? '#00ff88' : '#2a2f45'};"></div>` : ''}
                            </div>
                            <div style="flex: 1; padding-top: 2px;">
                                <div style="color: ${stage.completed ? '#fff' : '#8b92b0'}; font-weight: ${stage.completed ? '600' : '400'}; font-size: 13px; margin-bottom: 3px;">
                                    ${stage.stage}
                                </div>
                                <div style="color: #8b92b0; font-size: 11px;">${stage.time}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <!-- AI Prediction -->
                <div style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 153, 204, 0.1) 100%); border: 1px solid #00d4ff; padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24" fill="none" stroke="#00d4ff" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span style="color: #00d4ff; font-weight: 700; font-size: 14px;">AI Delivery Prediction</span>
                    </div>
                    <div style="color: #fff; font-size: 13px; margin-bottom: 8px;">
                        ETA: <span style="color: #00ff88; font-weight: 600;">${order.aiPrediction.eta}</span>
                    </div>
                    <div style="color: #8b92b0; font-size: 12px; margin-bottom: 8px;">
                        ${order.aiPrediction.message}
                    </div>
                    <div style="background: rgba(0, 212, 255, 0.2); padding: 8px; border-radius: 8px; display: inline-block;">
                        <span style="color: #00d4ff; font-size: 11px; font-weight: 600;">
                            ${order.aiPrediction.confidence}% Confidence
                        </span>
                    </div>
                </div>

                <!-- Delivery Info -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                    <div style="background: #1a1f3a; padding: 12px; border-radius: 10px; border: 1px solid #2a2f45;">
                        <div style="color: #8b92b0; font-size: 11px; margin-bottom: 5px;">Driver</div>
                        <div style="color: #fff; font-size: 13px; font-weight: 600;">${order.driver}</div>
                    </div>
                    <div style="background: #1a1f3a; padding: 12px; border-radius: 10px; border: 1px solid #2a2f45;">
                        <div style="color: #8b92b0; font-size: 11px; margin-bottom: 5px;">Vehicle</div>
                        <div style="color: #fff; font-size: 13px; font-weight: 600;">${order.vehicle}</div>
                    </div>
                    <div style="background: #1a1f3a; padding: 12px; border-radius: 10px; border: 1px solid #2a2f45;">
                        <div style="color: #8b92b0; font-size: 11px; margin-bottom: 5px;">Supplier</div>
                        <div style="color: #fff; font-size: 13px; font-weight: 600;">${order.supplier}</div>
                    </div>
                    <div style="background: #1a1f3a; padding: 12px; border-radius: 10px; border: 1px solid #2a2f45;">
                        <div style="color: #8b92b0; font-size: 11px; margin-bottom: 5px;">Expected</div>
                        <div style="color: #00ff88; font-size: 13px; font-weight: 600;">${order.expectedDelivery}</div>
                    </div>
                </div>

                <!-- Items -->
                <div style="background: #0a0e27; padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                    <h4 style="color: #fff; font-size: 14px; margin-bottom: 12px;">üì¶ Order Items</h4>
                    ${order.items.map(item => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #1a1f3a;">
                            <div>
                                <div style="color: #fff; font-size: 13px; font-weight: 600; margin-bottom: 3px;">${item.name}</div>
                                <div style="color: #8b92b0; font-size: 11px;">Quantity: ${item.qty}</div>
                            </div>
                            <div style="color: #00d4ff; font-weight: 700; font-size: 14px;">‡ß≥${(item.price * item.qty).toLocaleString()}</div>
                        </div>
                    `).join('')}
                    <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 12px;">
                        <span style="color: #fff; font-weight: 600; font-size: 15px;">Total</span>
                        <span style="color: #00ff88; font-weight: 700; font-size: 18px;">‡ß≥${order.total.toLocaleString()}</span>
                    </div>
                </div>
            `;

            document.getElementById('orderDetailModal').style.display = 'flex';
        }

        function closeOrderModal() {
            document.getElementById('orderDetailModal').style.display = 'none';
        }

        // Initialize
        renderActiveOrders();
        renderOrderHistory();
    </script>

    <script src="navigation.js"></script>
    <script>
        // Inject navigation
        document.getElementById('navigationContainer').innerHTML = generateMobileNav('retailer');
    </script>
</body>
</html>
    </script>
</body>
</html>