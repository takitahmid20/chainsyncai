<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChainSync AI - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container" id="dashboardContainer">
        <!-- Content will be loaded here -->
    </div>

    <script src="dashboard-data.js"></script>
    <script>
        // Check if user is logged in
        const userData = JSON.parse(localStorage.getItem('currentUser') || 'null');
        
        if (!userData) {
            window.location.href = 'signin.html';
        }

        function getUserTypeIcon(type) {
            const icons = {
                manufacturer: '<rect x="2" y="9" width="20" height="11" rx="2"/><path d="M6 9V4a2 2 0 012-2h8a2 2 0 012 2v5"/>',
                supplier: '<path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>',
                retailer: '<circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>',
                logistics: '<path d="M14 16V8a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2z"/><path d="M18 12h4l3 3v4h-3"/><circle cx="7" cy="20" r="2"/><circle cx="17" cy="20" r="2"/>'
            };
            return icons[type] || icons.manufacturer;
        }

        function getUserTypeLabel(type) {
            const labels = {
                manufacturer: 'Manufacturer',
                supplier: 'Supplier',
                retailer: 'Retailer',
                logistics: 'Logistics Partner'
            };
            return labels[type] || type;
        }

        function handleLogout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'signin.html';
        }

        function renderDashboard() {
            const metrics = dashboardData.metrics[userData.userType] || [];
            const activities = dashboardData.activities[userData.userType] || [];

            const html = `
                <!-- Header -->
                <div class="dashboard-header">
                    <div class="header-top">
                        <div class="header-logo-container">
                            <svg class="header-logo-icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <circle cx="12" cy="12" r="2"/>
                                <circle cx="12" cy="5" r="2"/>
                                <circle cx="19" cy="12" r="2"/>
                                <circle cx="5" cy="12" r="2"/>
                                <line x1="12" y1="7" x2="12" y2="10"/>
                                <line x1="14" y1="12" x2="17" y2="12"/>
                                <line x1="7" y1="12" x2="10" y2="12"/>
                            </svg>
                            <span class="header-logo-text">ChainSync AI</span>
                        </div>
                        <button class="logout-button" onclick="handleLogout()">
                            <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                                <polyline points="16 17 21 12 16 7"/>
                                <line x1="21" y1="12" x2="9" y2="12"/>
                            </svg>
                        </button>
                    </div>

                    <div class="user-info">
                        <div class="user-type-icon-container">
                            <svg class="user-type-icon-large" viewBox="0 0 24 24" fill="none" stroke-width="2">
                                ${getUserTypeIcon(userData.userType)}
                            </svg>
                        </div>
                        <div class="user-details">
                            <div class="welcome-small">Welcome back,</div>
                            <div class="user-name">${userData.fullName}</div>
                            <div class="user-type-badge">
                                <span class="user-type-text">${getUserTypeLabel(userData.userType)}</span>
                            </div>
                        </div>
                    </div>

                    <div class="company-info">
                        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <rect x="2" y="9" width="20" height="11" rx="2"/>
                            <path d="M6 9V4a2 2 0 012-2h8a2 2 0 012 2v5"/>
                        </svg>
                        <span class="company-name">${userData.companyName}</span>
                    </div>
                </div>

                <!-- Dashboard Content -->
                <div class="dashboard-content">
                    <!-- Metrics -->
                    <div class="section">
                        <div class="section-title">Key Metrics</div>
                        <div class="metrics-grid">
                            ${metrics.map(metric => `
                                <div class="metric-card">
                                    <div class="metric-icon-container">
                                        <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                                            ${getMetricIcon(metric.icon)}
                                        </svg>
                                    </div>
                                    <div class="metric-title">${metric.title}</div>
                                    <div class="metric-value">${metric.value}</div>
                                    <div class="metric-change ${metric.change.startsWith('+') ? 'positive' : 'negative'}">
                                        ${metric.change}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Recent Activities -->
                    <div class="section">
                        <div class="section-title">Recent Activities</div>
                        <div class="activities-list">
                            ${activities.map(activity => `
                                <div class="activity-card">
                                    <div class="activity-icon-container" style="background-color: ${getStatusColor(activity.status)}20;">
                                        <svg class="activity-icon" viewBox="0 0 24 24" fill="none" stroke="${getStatusColor(activity.status)}" stroke-width="2">
                                            ${getActivityIcon(activity.icon)}
                                        </svg>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">${activity.title}</div>
                                        <div class="activity-description">${activity.description}</div>
                                        <div class="activity-timestamp">${activity.timestamp}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="section">
                        <div class="section-title">Quick Actions</div>
                        <div class="quick-actions-grid">
                            <div class="quick-action-card">
                                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="12" y1="8" x2="12" y2="16"/>
                                    <line x1="8" y1="12" x2="16" y2="12"/>
                                </svg>
                                <div class="quick-action-text">New Order</div>
                            </div>
                            <div class="quick-action-card">
                                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <line x1="12" y1="20" x2="12" y2="10"/>
                                    <line x1="18" y1="20" x2="18" y2="4"/>
                                    <line x1="6" y1="20" x2="6" y2="16"/>
                                </svg>
                                <div class="quick-action-text">Analytics</div>
                            </div>
                            <div class="quick-action-card">
                                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                                    <circle cx="9" cy="7" r="4"/>
                                    <path d="M23 21v-2a4 4 0 00-3-3.87"/>
                                    <path d="M16 3.13a4 4 0 010 7.75"/>
                                </svg>
                                <div class="quick-action-text">Partners</div>
                            </div>
                            <div class="quick-action-card">
                                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                                </svg>
                                <div class="quick-action-text">Settings</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('dashboardContainer').innerHTML = html;
        }

        function getStatusColor(status) {
            const colors = {
                success: '#00d4ff',
                warning: '#ffa500',
                info: '#4169e1',
                error: '#ff4444'
            };
            return colors[status] || '#9ca3af';
        }

        function getMetricIcon(icon) {
            const icons = {
                'cube-outline': '<path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/>',
                'layers-outline': '<polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/>',
                'cart-outline': '<circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>',
                'people-outline': '<path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/>',
                'archive-outline': '<polyline points="21 8 21 21 3 21 3 8"/><rect x="1" y="3" width="22" height="5"/><line x1="10" y1="12" x2="14" y2="12"/>',
                'time-outline': '<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>',
                'briefcase-outline': '<rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/>',
                'checkmark-circle-outline': '<path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>',
                'trending-up-outline': '<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>',
                'pricetag-outline': '<path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/>',
                'bar-chart-outline': '<line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/>',
                'business-outline': '<rect x="2" y="9" width="20" height="11" rx="2"/><path d="M6 9V4a2 2 0 012-2h8a2 2 0 012 2v5"/>',
                'airplane-outline': '<path d="M23 12l-6.5-6.5a2.5 2.5 0 00-4 1.5V12L2 10v2l10.5 4V21l-3.5 2v1l5-1.5 5 1.5v-1l-3.5-2v-5l10.5-4v-2z"/>',
                'timer-outline': '<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>',
                'car-outline': '<path d="M14 16V8a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2z"/><path d="M18 12h4l3 3v4h-3"/><circle cx="7" cy="20" r="2"/><circle cx="17" cy="20" r="2"/>',
                'git-network-outline': '<circle cx="12" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="19" cy="12" r="2"/><circle cx="5" cy="12" r="2"/><line x1="12" y1="7" x2="12" y2="10"/><line x1="14" y1="12" x2="17" y2="12"/><line x1="7" y1="12" x2="10" y2="12"/>'
            };
            return icons[icon] || icons['cube-outline'];
        }

        function getActivityIcon(icon) {
            const icons = {
                'basket-outline': '<polyline points="17 10 21 10 21 20 3 20 3 10 7 10"/><polyline points="7 10 9 6 15 6 17 10"/><line x1="12" y1="6" x2="12" y2="14"/>',
                'checkmark-circle-outline': '<path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>',
                'warning-outline': '<path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>',
                'send-outline': '<line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>',
                'document-text-outline': '<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>',
                'sync-outline': '<polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>',
                'trophy-outline': '<path d="M6 9H4.5a2.5 2.5 0 010-5H6"/><path d="M18 9h1.5a2.5 2.5 0 000-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0012 0V2z"/>',
                'refresh-outline': '<polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>',
                'return-down-back-outline': '<polyline points="9 14 4 9 9 4"/><path d="M20 20v-7a4 4 0 00-4-4H4"/>',
                'checkmark-done-outline': '<polyline points="17 5 9 13 6 10"/><polyline points="21 3 13 11 10 8"/>',
                'navigate-outline': '<polygon points="3 11 22 2 13 21 11 13 3 11"/>',
                'alert-circle-outline': '<circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>'
            };
            return icons[icon] || icons['checkmark-circle-outline'];
        }

        // Render dashboard on load
        renderDashboard();
    </script>
</body>
</html>
